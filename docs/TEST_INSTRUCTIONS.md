# Version 2.18 - Testing Instructions

## 新功能测试指南

### 1. 双击打开文件编辑器 (Double-click to Edit)

#### Remote Files (远程文件):
1. 连接到 SSH 服务器
2. 在 Remote Files 面板中找到一个文本文件
3. **双击该文件**
4. ✅ 预期结果：代码编辑器打开，显示文件内容
5. 修改内容并保存
6. ✅ 预期结果：文件上传到服务器，文件列表刷新

#### Local Files (本地文件):
1. 在 Local Files 面板中找到一个文本文件
2. **双击该文件**
3. ✅ 预期结果：代码编辑器打开，显示文件内容
4. 修改内容并保存
5. ✅ 预期结果：文件保存到本地，文件列表刷新

---

### 2. F2 快捷键重命名 (F2 Rename)

#### 方法一：使用 F2 键
1. **单击**选中一个文件或文件夹（高亮显示）
2. 按 **F2** 键
3. ✅ 预期结果：弹出重命名对话框，显示当前文件名
4. 输入新名称，按 Enter 或点击 "Rename" 按钮
5. ✅ 预期结果：文件/文件夹重命名成功，列表刷新

#### 方法二：使用右键菜单
1. **右键点击**一个文件或文件夹
2. 在上下文菜单中点击 **"Rename"** 选项
3. ✅ 预期结果：弹出重命名对话框
4. 输入新名称并确认
5. ✅ 预期结果：文件/文件夹重命名成功

#### 测试场景：
- [ ] 重命名远程文件 (Remote Files)
- [ ] 重命名远程文件夹 (Remote Files)
- [ ] 重命名本地文件 (Local Files)
- [ ] 重命名本地文件夹 (Local Files)
- [ ] 测试重名冲突（应该显示错误提示）
- [ ] 测试取消操作（按 ESC 或点击 Cancel）

---

### 3. Ctrl+C 和 Ctrl+D 功能验证

#### 关于键盘映射软件的说明：
如果您使用了键盘映射软件（如 Karabiner-Elements），可能需要配置以下内容：
- 确保 Ctrl 键没有被映射到其他功能
- 允许 Ctrl+C 和 Ctrl+D 传递到应用程序
- 或者使用 macOS 原生快捷键：**Cmd+C** 复制

#### Ctrl+C 测试：
1. 打开一个终端会话（SSH 或 Local Terminal）
2. **点击终端面板内部**确保焦点在终端上
3. 输入一个命令但不执行（例如：`ls -la`）
4. 按 **Ctrl+C**
5. ✅ 预期结果：命令被取消，显示 `^C`，出现新的命令提示符

#### Ctrl+C 复制测试：
1. 在终端中**选中一些文本**（用鼠标拖动）
2. 按 **Ctrl+C**
3. ✅ 预期结果：文本被复制到剪贴板
4. 打开其他应用（如记事本）粘贴
5. ✅ 预期结果：能够粘贴刚才复制的内容

#### Ctrl+D 测试：
1. 在终端中输入命令：`cat`（不带参数）
2. 按 Enter（cat 会等待输入）
3. 按 **Ctrl+D**
4. ✅ 预期结果：cat 命令退出（收到 EOF 信号）

#### 如果 Ctrl+C/D 不工作：
1. **检查焦点**：确保点击了终端面板内部
2. **检查映射软件**：
   - 打开键盘映射软件设置
   - 查看 Ctrl 键是否被重新映射
   - 添加例外规则允许 xterm-file-manager 接收 Ctrl+C/D
3. **使用替代方案**：
   - 复制：使用 **Cmd+C**（macOS 原生）
   - 粘贴：使用 **Cmd+V** 或**右键点击终端**
   - 中断：Ctrl+C 应该总是工作（如果不工作，是映射软件问题）

---

## 技术说明

### 实现细节：
- **双击编辑**：`handleFileDoubleClick()` 在 FileManager.tsx 和 LocalFileManager.tsx
- **F2 重命名**：键盘事件监听器 + Modal 对话框
- **后端 API**：
  - `RenameRemoteFile(sessionID, oldPath, newName)` - SFTP 重命名
  - `RenameLocalFile(oldPath, newName)` - 本地文件系统重命名
- **快捷键**：Terminal.tsx 中的 `attachCustomKeyEventHandler()`

### 构建信息：
- 构建命令：`wails build`
- 构建时间：6.146s
- 平台：darwin/arm64
- 输出：`build/bin/xterm-file-manager.app`

---

## 常见问题

### Q: 双击文件没有反应？
A: 确保文件不是目录。双击目录会进入该目录，只有文件才会打开编辑器。

### Q: F2 键没有反应？
A: 确保先**单击选中**文件（文件应该高亮显示），然后再按 F2。

### Q: Ctrl+C 不能复制？
A: 
1. 确保终端中有选中文本
2. 或者使用 Cmd+C（macOS 原生快捷键）
3. 检查键盘映射软件设置

### Q: Ctrl+D 不能退出？
A: 
1. 确保焦点在终端面板上
2. 检查键盘映射软件是否拦截了 Ctrl+D
3. 确保当前命令正在等待输入（如 `cat` 命令）

### Q: 重命名失败？
A: 可能原因：
- 新文件名已存在（会显示错误提示）
- 没有权限（远程服务器权限问题）
- 特殊字符（某些字符在文件名中不允许）

---

## 反馈

如果遇到任何问题，请提供：
1. 操作步骤
2. 预期结果 vs 实际结果
3. 是否使用了键盘映射软件
4. 错误信息（如果有）
